2025-11-17T14:35:22.740Z
cwd: ~/projects/add-someone-to-a-table
package: govuk-prototype-kit@13.18.1
argv: ~/.nvm/versions/node/v24.7.0/bin/node ~/.npm/_npx/751a68202a4807b7/node_modules/.bin/govuk-prototype-kit migrate
Started [Check migration is being applied to a pre v13 prototype]
Succeeded [Check migration is being applied to a pre v13 prototype]
2025-11-17T14:35:32.493Z
cwd: ~/projects/add-someone-to-a-table
package: govuk-prototype-kit@13.18.1
argv: ~/.nvm/versions/node/v24.7.0/bin/node ~/projects/add-someone-to-a-table/node_modules/.bin/govuk-prototype-kit migrate -- ~/projects/add-someone-to-a-table
Started [Migrate config.js to config.json]
Started [Update application SCSS file]
Started [Deleted files that are no longer needed]
Started [Deleted directories that are no longer needed]
Started [Remove unused directory docs]
Started [Remove unused directory gulp]
Started [Remove unused directory lib]
Started [Remove unused directory public]
Started [Delete listen-on-port.js]
Started [Delete gulpfile.js]
Started [Delete server.js]
Started [Delete Procfile]
Started [Delete start.js]
Started [Delete app/assets/sass/unbranded-ie8.scss]
Started [Delete VERSION.txt]
Started [Delete app/assets/sass/application-ie8.scss]
Succeeded [Migrate config.js to config.json]
Succeeded [Delete gulpfile.js]
Succeeded [Delete Procfile]
Succeeded [Delete listen-on-port.js]
Succeeded [Delete app/assets/sass/unbranded-ie8.scss]
Succeeded [Delete start.js]
Succeeded [Delete server.js]
Succeeded [Delete VERSION.txt]
Succeeded [Delete app/assets/sass/application-ie8.scss]
Succeeded [Deleted files that are no longer needed]
Found [// Add your routes here - above the module.exports line] in [app/routes.js], replacing
Started [Overwrite app/assets/javascripts/application.js]
Started [Overwrite app/views/layout.html]
Started [Overwrite app/filters.js]
Started [Delete app/assets/images/separator-2x.png]
Started [Delete app/assets/javascripts/auto-store-data.js]
Started [Delete app/assets/images/unbranded.ico]
Started [Delete app/views/includes/breadcrumb_examples.html]
Started [Delete app/assets/sass/unbranded.scss]
Found [// Add extra styles here, or re-organise the Sass files in whichever way makes most sense to you] in [app/assets/sass/application.scss], replacing
Started [Delete app/assets/images/separator.png]
Started [Delete app/views/includes/head.html]
Started [Delete app/views/layout_unbranded.html]
Started [Delete app/views/includes/scripts.html]
Started [Delete app/assets/sass/patterns/_step-by-step-header.scss]
Started [Delete app/assets/sass/patterns/_step-by-step-nav.scss]
Started [Delete app/assets/sass/patterns/_related-items.scss]
Started [Delete app/assets/sass/patterns/_task-list.scss]
Keeping these lines from old file
Copying from [node_modules/govuk-prototype-kit/prototype-starter/app/assets/javascripts/application.js] to [app/assets/javascripts/application.js]
Failed [Overwrite app/views/layout.html]
Started [Update app/filters.js]
Started [Delete app/assets/sass/patterns/_step-by-step-related.scss]
Succeeded [Remove unused directory gulp]
Keeping these lines from old file
Succeeded [Delete app/assets/images/separator-2x.png]
Succeeded [Delete app/assets/javascripts/auto-store-data.js]
Succeeded [Delete app/views/includes/breadcrumb_examples.html]
Succeeded [Delete app/assets/sass/unbranded.scss]
Succeeded [Delete app/assets/images/unbranded.ico]
Succeeded [Delete app/views/includes/head.html]
Succeeded [Delete app/views/layout_unbranded.html]
Succeeded [Delete app/views/includes/scripts.html]
Succeeded [Delete app/assets/images/separator.png]
Succeeded [Delete app/assets/sass/patterns/_step-by-step-header.scss]
Succeeded [Delete app/assets/sass/patterns/_step-by-step-nav.scss]
Succeeded [Delete app/assets/sass/patterns/_task-list.scss]
Succeeded [Delete app/assets/sass/patterns/_related-items.scss]
Succeeded [Delete app/assets/sass/patterns/_step-by-step-related.scss]
Succeeded [Update application SCSS file]
//,// For guidance on how to create routes see:,// https://prototype-kit.service.gov.uk/docs/create-routes,//,,const govukPrototypeKit = require('govuk-prototype-kit'),const router = govukPrototypeKit.requests.setupRouter(),,// Add your routes here,,,///Contact table,router.get('/contacts/contacts-info', function(req, res) {,,  //set back to the previous page,  req.session.data.back = req.headers.referer,,  //set the success banner back to false this will mean the banner will only show once for the user,  req.session.data.successBanner = "false",,  res.render('contacts/contacts-info');,});,,////////////////////////////////////////////,////////ADD A CONTACT,,//Enter a name,router.get('/contacts/add-a-contact/enter-a-name', function(req, res) {,,  //set back to the previous page,  req.session.data.back = req.headers.referer,  res.render('contacts/add-a-contact/enter-a-name');,});,,router.post('/contacts/add-a-contact/enter-a-name', function(req, res) {,,  //If the user has come from check-you-answers then redirect back to that page, else continue to enter an email,  if (req.session.data['back'].includes("check-your-answers")) {,    res.redirect('/contacts/add-a-contact/check-your-answers');,  } else {,    res.redirect('/contacts/add-a-contact/enter-an-email');,  },,});,,,,//Enter an email,router.get('/contacts/add-a-contact/enter-an-email', function(req, res) {,  res.render('contacts/add-a-contact/enter-an-email');,});,,router.post('/contacts/add-a-contact/enter-an-email', function(req, res) {,  res.redirect('/contacts/add-a-contact/check-your-answers');,});,,,//Check your answers,router.get('/contacts/add-a-contact/check-your-answers', function(req, res) {,  res.render('contacts/add-a-contact/check-your-answers');,});,,router.post('/contacts/add-a-contact/check-your-answers', function(req, res) {,,,  // session data,  let name = req.session.data['name'],  let email = req.session.data['email'],,  // make an object to hold data,  let newContact = {,    name,,    email,  };,,  // add the new contact object to the contacts array,  req.session.data.contacts.push(newContact);,,  //blank the name and email in case another contact is added,  req.session.data.name = "",  req.session.data.email = "",,  res.redirect('/contacts/add-a-contact/contact-set-up');,});,,,//Success - Contact set up,router.get('/contacts/add-a-contact/contact-set-up', function(req, res) {,,,  res.render('contacts/add-a-contact/contact-set-up');,});,,,////////////////////////////////////////////,////////REMOVE A CONTACT,,//Enter a name,router.get('/contacts/remove-a-contact/youre-about-to-remove-a-contact', function(req, res) {,,  //set back to the previous page,  req.session.data.back = req.headers.referer,  res.render('contacts/remove-a-contact/youre-about-to-remove-a-contact');,});,,router.post('/contacts/remove-a-contact/youre-about-to-remove-a-contact', function(req, res) {,,  //get the ID of the contact that you want to remove,  let contactID = req.session.data['contactID'],,  //get the contacts List,  let contacts = req.session.data['contacts'],,  //set the removed contacts name to so we can use it in the success banner after it has been removed,  req.session.data.removedName = req.session.data.contacts[contactID]['name'],,  //remove the object that is in the position set by the contact ID,  if (contactID > -1) {,    contacts.splice(contactID, 1);,  },,  //set success banner to true,  req.session.data.successBanner = "true",,  res.redirect('/contacts/contacts-info');,,});,,module.exports = router,
Succeeded [Remove unused directory public]
Succeeded [Remove unused directory lib]
Found [module.exports = router;,module.exports = router] in [app/routes.js], removing
Succeeded [Remove unused directory docs]
Succeeded [Update app/filters.js]
Succeeded [Update routes file]
Succeeded [Deleted directories that are no longer needed]
Succeeded [Overwrite app/filters.js]
Succeeded [Overwrite app/assets/javascripts/application.js]
Started [Delete app/assets/javascripts/jquery-1.11.3.js]
Succeeded [Delete app/assets/javascripts/jquery-1.11.3.js]
ENOENT: no such file or directory, stat '/Users/chrisbarrett/projects/add-someone-to-a-table/app/views/layout_unbranded.html'
Error: ENOENT: no such file or directory, stat '/Users/chrisbarrett/projects/add-someone-to-a-table/app/views/layout_unbranded.html'
    at async Object.stat (node:internal/fs/promises:1040:18)
    at async /Users/chrisbarrett/projects/add-someone-to-a-table/node_modules/govuk-prototype-kit/lib/utils/index.js:252:22
    at async asyncSeriesMap (/Users/chrisbarrett/projects/add-someone-to-a-table/node_modules/govuk-prototype-kit/lib/utils/asyncSeriesMap.js:5:18)
    at async searchAndReplaceFiles (/Users/chrisbarrett/projects/add-someone-to-a-table/node_modules/govuk-prototype-kit/lib/utils/index.js:250:25)
    at async updateUnbrandedLayouts (/Users/chrisbarrett/projects/add-someone-to-a-table/node_modules/govuk-prototype-kit/migrator/migration-steps.js:256:19)
    at async Promise.all (index 7)
    at async Object.migrate (/Users/chrisbarrett/projects/add-someone-to-a-table/node_modules/govuk-prototype-kit/migrator/index.js:128:33)
    at async runMigrate (/Users/chrisbarrett/projects/add-someone-to-a-table/node_modules/govuk-prototype-kit/bin/cli:391:5)
